<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>klImageCore: kl_image_buffer.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>kl_image_buffer.h</h1>  </div>
</div>
<div class="contents">
<a href="kl__image__buffer_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*******************************</span>
<a name="l00002"></a>00002 <span class="comment"> * Copyright (c) &lt;2007&gt;, &lt;Bruce Campbell&gt; All rights reserved. Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer. 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution. THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.  *  </span>
<a name="l00003"></a>00003 <span class="comment"> * Bruce B Campbell 11 30 2012  *</span>
<a name="l00004"></a>00004 <span class="comment"> ********************************/</span>
<a name="l00005"></a>00005 
<a name="l00006"></a>00006 <span class="preprocessor">#ifndef KL_IMAGE_BUFFER_H</span>
<a name="l00007"></a>00007 <span class="preprocessor"></span><span class="preprocessor">#define KL_IMAGE_BUFFER_H</span>
<a name="l00008"></a>00008 <span class="preprocessor"></span><span class="preprocessor">#include &quot;kl_util.h&quot;</span>
<a name="l00009"></a>00009 <span class="preprocessor">#include &lt;deque&gt;</span>
<a name="l00010"></a>00010 <span class="preprocessor">#include &lt;string&gt;</span>
<a name="l00011"></a>00011 <span class="preprocessor">#include &lt;map&gt;</span>
<a name="l00012"></a>00012 <span class="preprocessor">#include &lt;limits&gt;</span>
<a name="l00013"></a>00013 
<a name="l00014"></a>00014 <span class="preprocessor">#ifdef _WIN64</span>
<a name="l00015"></a>00015 <span class="preprocessor"></span><span class="preprocessor"> #include &lt;malloc.h&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#endif</span>
<a name="l00017"></a>00017 <span class="preprocessor"></span>
<a name="l00018"></a><a class="code" href="classkl_rect.html">00018</a> <span class="keyword">class </span><a class="code" href="classkl_rect.html">klRect</a>{
<a name="l00019"></a>00019 <span class="keyword">public</span>:
<a name="l00020"></a><a class="code" href="classkl_rect.html#a09f9ce7db91715bfa845cb57bc1f41b1">00020</a>     <a class="code" href="classkl_rect.html#a09f9ce7db91715bfa845cb57bc1f41b1">klRect</a>(<span class="keywordtype">int</span> ix,<span class="keywordtype">int</span> iy,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> iw,<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ih)
<a name="l00021"></a>00021         : <a class="code" href="classkl_rect.html#a53d1f64154e99b99b12efb9059625e50">x</a>(ix), <a class="code" href="classkl_rect.html#a75f43649d3a344eed165b875ef861185">y</a>(iy),<a class="code" href="classkl_rect.html#a5756accaacd4af564def996d7a8b49d3">w</a>(iw),<a class="code" href="classkl_rect.html#aa8e45610362d5d6587014cf21714278b">h</a>(ih)
<a name="l00022"></a>00022     {
<a name="l00023"></a>00023     }
<a name="l00024"></a><a class="code" href="classkl_rect.html#a53d1f64154e99b99b12efb9059625e50">00024</a>     <span class="keywordtype">int</span> <a class="code" href="classkl_rect.html#a53d1f64154e99b99b12efb9059625e50">x</a>;
<a name="l00025"></a><a class="code" href="classkl_rect.html#a75f43649d3a344eed165b875ef861185">00025</a>     <span class="keywordtype">int</span> <a class="code" href="classkl_rect.html#a75f43649d3a344eed165b875ef861185">y</a>;
<a name="l00026"></a>00026 
<a name="l00027"></a><a class="code" href="classkl_rect.html#a5756accaacd4af564def996d7a8b49d3">00027</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classkl_rect.html#a5756accaacd4af564def996d7a8b49d3">w</a>;
<a name="l00028"></a><a class="code" href="classkl_rect.html#aa8e45610362d5d6587014cf21714278b">00028</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="classkl_rect.html#aa8e45610362d5d6587014cf21714278b">h</a>;
<a name="l00029"></a>00029 };
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="comment">/*</span>
<a name="l00032"></a>00032 <span class="comment">size_t note</span>
<a name="l00033"></a>00033 <span class="comment"></span>
<a name="l00034"></a>00034 <span class="comment">size_t is the unsigned integer type of the result of the sizeof operator (and of the offsetof operator).</span>
<a name="l00035"></a>00035 <span class="comment">It is guaranteed to be big enough to contain the size of the biggest object your system can handle (e.g. a static array of 8Gb).</span>
<a name="l00036"></a>00036 <span class="comment">It may be bigger, equal or even smaller than an unsigned int and your compiler might make assumption about it for optimization purpose.</span>
<a name="l00037"></a>00037 <span class="comment">Find more precise information on the C99 standard (section 7.17), or in section 7.19 of the C11 standard.</span>
<a name="l00038"></a>00038 <span class="comment"></span>
<a name="l00039"></a>00039 <span class="comment">The size_t type is the type returned by the sizeof operator. It is an unsigned integer capable of expressing the size in bytes </span>
<a name="l00040"></a>00040 <span class="comment">of any memory range supported on the host machine. It is (typically) related to ptrdiff_t in that ptrdiff_t is a signed integer </span>
<a name="l00041"></a>00041 <span class="comment">value such that sizeof(ptrdiff_t) and sizeof(size_t) are equal.  When writing C code you should always use size_t whenever dealing </span>
<a name="l00042"></a>00042 <span class="comment">with memory ranges. The int type on the other hand is basically defined as the size of the (signed) integer value that the host machine </span>
<a name="l00043"></a>00043 <span class="comment">can use to most efficiently perform integer arithmetic. For example, on many older PC type computers the value sizeof(size_t) would be 4 (bytes) </span>
<a name="l00044"></a>00044 <span class="comment">but sizeof(int) would be 2 (byte). 16 bit arithmetic was faster than 32 bit arithmetic, though the CPU could handle a (logical) memory </span>
<a name="l00045"></a>00045 <span class="comment">space of up to 4 GiB. Use the int type only when you care about efficiency as its actual precision depends strongly on both compiler </span>
<a name="l00046"></a>00046 <span class="comment">options and machine architecture. In particular the C standard specifies the following invariants: </span>
<a name="l00047"></a>00047 <span class="comment">sizeof(char) &lt;= sizeof(short) &lt;= sizeof(int) &lt;= sizeof(long) </span>
<a name="l00048"></a>00048 <span class="comment">placing no other limitations on the actual representation of the precision available to the programmer for each of these primitive types.</span>
<a name="l00049"></a>00049 <span class="comment"></span>
<a name="l00050"></a>00050 <span class="comment">*/</span>
<a name="l00051"></a>00051 
<a name="l00052"></a><a class="code" href="classkl_raster_buffer.html">00052</a> <span class="keyword">class </span><a class="code" href="classkl_raster_buffer.html">klRasterBuffer</a> {
<a name="l00053"></a>00053 <span class="keyword">public</span>:
<a name="l00054"></a>00054  
<a name="l00055"></a>00055     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * <a class="code" href="classkl_raster_buffer.html#afbfd9c8f7db52298b1d32accb9214c0d">buffer</a>() <span class="keyword">const</span> = 0;
<a name="l00056"></a>00056   
<a name="l00057"></a>00057     <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * <a class="code" href="classkl_raster_buffer.html#afbfd9c8f7db52298b1d32accb9214c0d">buffer</a>() = 0;
<a name="l00058"></a>00058    
<a name="l00059"></a>00059     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_raster_buffer.html#a6d70e8f7a94b047009881f6cc878f2ec">numBands</a>() <span class="keyword">const</span> = 0;
<a name="l00060"></a>00060    
<a name="l00061"></a>00061     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_raster_buffer.html#afffe61d747e0320ce566a0560b3001fc">width</a>() <span class="keyword">const</span> = 0;
<a name="l00062"></a>00062   
<a name="l00063"></a>00063     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_raster_buffer.html#a1c42ba2cfbbf33be47f14d8c7189965b">height</a>() <span class="keyword">const</span> = 0;
<a name="l00064"></a>00064 
<a name="l00065"></a>00065     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_raster_buffer.html#ae23d2d05208c36d20bf11bee8ce11e4e">sampleBits</a>() <span class="keyword">const</span> = 0;
<a name="l00066"></a>00066 
<a name="l00067"></a>00067     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_raster_buffer.html#a8bc8d8632f806dad5e0ca05a76f30b06">bandStrideBits</a>() <span class="keyword">const</span> = 0;
<a name="l00068"></a>00068  
<a name="l00069"></a>00069     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_raster_buffer.html#abce672abff6fd1d954064dd527900d2d">xStrideBits</a>() <span class="keyword">const</span> = 0;
<a name="l00070"></a>00070 
<a name="l00071"></a>00071     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_raster_buffer.html#aa89af3d67a35f6abc0b6c55957ff20f3">yStrideBits</a>() <span class="keyword">const</span> = 0;
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="classkl_raster_buffer.html#a2afe10df0f846d3bf3e96864d6046c44">00073</a>     <span class="keyword">virtual</span> <a class="code" href="classkl_raster_buffer.html#a2afe10df0f846d3bf3e96864d6046c44">~klRasterBuffer</a>() {};
<a name="l00074"></a>00074    
<a name="l00075"></a><a class="code" href="classkl_raster_buffer.html#ad6fbaff8c6c3818b93a478a1d1bccde5">00075</a>     <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_raster_buffer.html#ad6fbaff8c6c3818b93a478a1d1bccde5">bandStride</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_raster_buffer.html#a8bc8d8632f806dad5e0ca05a76f30b06">bandStrideBits</a>() / <a class="code" href="classkl_raster_buffer.html#a45bff21b22ff0999b520bd110c0354cc">bitsPerByte</a>(); }
<a name="l00076"></a>00076    
<a name="l00077"></a><a class="code" href="classkl_raster_buffer.html#a1c7ec882437d56847d32f0bb05c835c8">00077</a>     <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_raster_buffer.html#a1c7ec882437d56847d32f0bb05c835c8">xStride</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_raster_buffer.html#abce672abff6fd1d954064dd527900d2d">xStrideBits</a>() / <a class="code" href="classkl_raster_buffer.html#a45bff21b22ff0999b520bd110c0354cc">bitsPerByte</a>(); }
<a name="l00078"></a>00078     
<a name="l00079"></a><a class="code" href="classkl_raster_buffer.html#a1795a9b35866d8c8dd3178dba5174a90">00079</a>     <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_raster_buffer.html#a1795a9b35866d8c8dd3178dba5174a90">yStride</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_raster_buffer.html#aa89af3d67a35f6abc0b6c55957ff20f3">yStrideBits</a>() / <a class="code" href="classkl_raster_buffer.html#a45bff21b22ff0999b520bd110c0354cc">bitsPerByte</a>(); }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081 <span class="keyword">protected</span>:
<a name="l00082"></a><a class="code" href="classkl_raster_buffer.html#a45bff21b22ff0999b520bd110c0354cc">00082</a>     <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_raster_buffer.html#a45bff21b22ff0999b520bd110c0354cc">bitsPerByte</a>() { <span class="keywordflow">return</span> std::numeric_limits&lt;unsigned char&gt;::digits; }
<a name="l00083"></a>00083 };
<a name="l00084"></a>00084 
<a name="l00085"></a><a class="code" href="classkl_reference_counted_raster_buffer.html">00085</a> <span class="keyword">class </span><a class="code" href="classkl_reference_counted_raster_buffer.html">klReferenceCountedRasterBuffer</a> : <span class="keyword">public</span> <a class="code" href="classkl_raster_buffer.html">klRasterBuffer</a>, <span class="keyword">public</span> <a class="code" href="classkl_ref_count.html">klRefCount</a>&lt;klMutex&gt;
<a name="l00086"></a>00086 {
<a name="l00087"></a>00087 <span class="keyword">public</span> :
<a name="l00088"></a><a class="code" href="classkl_reference_counted_raster_buffer.html#a0a1324ad2ff6a866c934f1d2bfd3dfd4">00088</a>     <a class="code" href="classkl_reference_counted_raster_buffer.html#a0a1324ad2ff6a866c934f1d2bfd3dfd4">klReferenceCountedRasterBuffer</a>(){};
<a name="l00089"></a>00089 };
<a name="l00090"></a>00090 
<a name="l00091"></a><a class="code" href="kl__image__buffer_8h.html#a9f4b32f54cc0ca0a7d1bec84af2f06fe">00091</a> <span class="keyword">typedef</span> klSmartPtr&lt;klReferenceCountedRasterBuffer&gt; klRasterBufferReference;
<a name="l00092"></a>00092 
<a name="l00093"></a><a class="code" href="kl__image__buffer_8h.html#ae411c8671aea3ca24d160c5c58aafd88">00093</a> <span class="keyword">typedef</span> klSmartPtr&lt;klReferenceCountedRasterBuffer&gt; klRasterBufferPointer;
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <a class="code" href="kl__image__buffer_8h.html#a9f4b32f54cc0ca0a7d1bec84af2f06fe">klRasterBufferReference</a> <a class="code" href="kl__image__buffer_8h.html#a4298ecbf4271b92db5318d259e19f635">createRasterBuffer</a>(
<a name="l00096"></a>00096     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *buffer,  <span class="comment">// caller owns</span>
<a name="l00097"></a>00097     <span class="keywordtype">size_t</span> sampleBits,
<a name="l00098"></a>00098     <span class="keywordtype">size_t</span> bandStrideBits,
<a name="l00099"></a>00099     <span class="keywordtype">size_t</span> xStrideBits,
<a name="l00100"></a>00100     <span class="keywordtype">size_t</span> yStrideBits,
<a name="l00101"></a>00101     <span class="keywordtype">size_t</span> numBands,
<a name="l00102"></a>00102     <span class="keywordtype">size_t</span> width,
<a name="l00103"></a>00103     <span class="keywordtype">size_t</span> height
<a name="l00104"></a>00104 );
<a name="l00105"></a>00105 
<a name="l00106"></a>00106 <span class="comment">// A klRasterBuffer that does not have any ownership of the buffer.</span>
<a name="l00107"></a><a class="code" href="classkl_unmanaged_raster_buffer.html">00107</a> <span class="keyword">class </span><a class="code" href="classkl_unmanaged_raster_buffer.html">klUnmanagedRasterBuffer</a> : <span class="keyword">public</span> <a class="code" href="classkl_reference_counted_raster_buffer.html">klReferenceCountedRasterBuffer</a> {
<a name="l00108"></a>00108 <span class="keyword">public</span>:
<a name="l00109"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#a32e07030403161fbe5a6e7158c8ff41d">00109</a>     <a class="code" href="classkl_unmanaged_raster_buffer.html#a32e07030403161fbe5a6e7158c8ff41d">klUnmanagedRasterBuffer</a>(
<a name="l00110"></a>00110         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="classkl_unmanaged_raster_buffer.html#ae395619d776428c5eb4da1a7c3263272">buffer</a>,
<a name="l00111"></a>00111         <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a20f8febd2e474781d01ee4e218db16ed">sampleBits</a>,
<a name="l00112"></a>00112         <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a4385a418aef0e095f8d11c08baae582a">bandStrideBits</a>,
<a name="l00113"></a>00113         <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#afe2f50003a8fe484f1c6482d1052f27a">xStrideBits</a>,
<a name="l00114"></a>00114         <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a41e06f44336c691cf2fb5fbb3143786d">yStrideBits</a>,
<a name="l00115"></a>00115         <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a631fe28bd156750ba469f052a12ba0df">numBands</a>,
<a name="l00116"></a>00116         <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a444a23730847c968e94fa3631d28fff0">width</a>,
<a name="l00117"></a>00117         <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a5b594e3f1beadbb624b62095fa635f54">height</a>
<a name="l00118"></a>00118     ) : <a class="code" href="classkl_unmanaged_raster_buffer.html#ab21109e6a3a4cad98ed6c02ccea15455">m_buffer</a>(buffer),
<a name="l00119"></a>00119         <a class="code" href="classkl_unmanaged_raster_buffer.html#adab4a99409b398f1207e8a6344af6993">m_sampleBits</a>(sampleBits),
<a name="l00120"></a>00120         <a class="code" href="classkl_unmanaged_raster_buffer.html#a5e108302580c22b4db5e78219da05236">m_numBands</a>(numBands),
<a name="l00121"></a>00121         <a class="code" href="classkl_unmanaged_raster_buffer.html#a0fb0de1c89acd9b36a747f85e80b3c22">m_width</a>(width),
<a name="l00122"></a>00122         <a class="code" href="classkl_unmanaged_raster_buffer.html#aba5210cb860d91963e62f6d7d124144c">m_height</a>(height),
<a name="l00123"></a>00123         <a class="code" href="classkl_unmanaged_raster_buffer.html#a44aa41d13b6f445a319a0784b89d4bce">m_bandStrideBits</a>(bandStrideBits),
<a name="l00124"></a>00124         <a class="code" href="classkl_unmanaged_raster_buffer.html#aba204e4408dd798bd063f46a8ec35fe5">m_xStrideBits</a>(xStrideBits),
<a name="l00125"></a>00125         <a class="code" href="classkl_unmanaged_raster_buffer.html#afac871393d42292fe99f7e2b6f235f73">m_yStrideBits</a>(yStrideBits)
<a name="l00126"></a>00126     {
<a name="l00127"></a>00127     }
<a name="l00128"></a>00128 
<a name="l00129"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#ae395619d776428c5eb4da1a7c3263272">00129</a>     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="classkl_unmanaged_raster_buffer.html#ae395619d776428c5eb4da1a7c3263272">buffer</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#ab21109e6a3a4cad98ed6c02ccea15455">m_buffer</a>; }
<a name="l00130"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#ab6646678a2231700019cdb1be0739d66">00130</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="classkl_unmanaged_raster_buffer.html#ab6646678a2231700019cdb1be0739d66">buffer</a>() { <span class="keywordflow">return</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#ab21109e6a3a4cad98ed6c02ccea15455">m_buffer</a>; }
<a name="l00131"></a>00131 
<a name="l00132"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#a20f8febd2e474781d01ee4e218db16ed">00132</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a20f8febd2e474781d01ee4e218db16ed">sampleBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#adab4a99409b398f1207e8a6344af6993">m_sampleBits</a>; }
<a name="l00133"></a>00133 
<a name="l00134"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#a631fe28bd156750ba469f052a12ba0df">00134</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a631fe28bd156750ba469f052a12ba0df">numBands</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a5e108302580c22b4db5e78219da05236">m_numBands</a>; }
<a name="l00135"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#a444a23730847c968e94fa3631d28fff0">00135</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a444a23730847c968e94fa3631d28fff0">width</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a0fb0de1c89acd9b36a747f85e80b3c22">m_width</a>; }
<a name="l00136"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#a5b594e3f1beadbb624b62095fa635f54">00136</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a5b594e3f1beadbb624b62095fa635f54">height</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#aba5210cb860d91963e62f6d7d124144c">m_height</a>; }
<a name="l00137"></a>00137 
<a name="l00138"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#a4385a418aef0e095f8d11c08baae582a">00138</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a4385a418aef0e095f8d11c08baae582a">bandStrideBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a44aa41d13b6f445a319a0784b89d4bce">m_bandStrideBits</a>; }
<a name="l00139"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#afe2f50003a8fe484f1c6482d1052f27a">00139</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#afe2f50003a8fe484f1c6482d1052f27a">xStrideBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#aba204e4408dd798bd063f46a8ec35fe5">m_xStrideBits</a>; }
<a name="l00140"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#a41e06f44336c691cf2fb5fbb3143786d">00140</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a41e06f44336c691cf2fb5fbb3143786d">yStrideBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#afac871393d42292fe99f7e2b6f235f73">m_yStrideBits</a>; }
<a name="l00141"></a>00141 
<a name="l00142"></a>00142 <span class="keyword">private</span>:
<a name="l00143"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#ab21109e6a3a4cad98ed6c02ccea15455">00143</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * <a class="code" href="classkl_unmanaged_raster_buffer.html#ab21109e6a3a4cad98ed6c02ccea15455">m_buffer</a>;
<a name="l00144"></a>00144 
<a name="l00145"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#adab4a99409b398f1207e8a6344af6993">00145</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#adab4a99409b398f1207e8a6344af6993">m_sampleBits</a>;
<a name="l00146"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#a5e108302580c22b4db5e78219da05236">00146</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a5e108302580c22b4db5e78219da05236">m_numBands</a>;
<a name="l00147"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#a0fb0de1c89acd9b36a747f85e80b3c22">00147</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a0fb0de1c89acd9b36a747f85e80b3c22">m_width</a>;
<a name="l00148"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#aba5210cb860d91963e62f6d7d124144c">00148</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#aba5210cb860d91963e62f6d7d124144c">m_height</a>;
<a name="l00149"></a>00149 
<a name="l00150"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#a44aa41d13b6f445a319a0784b89d4bce">00150</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#a44aa41d13b6f445a319a0784b89d4bce">m_bandStrideBits</a>;
<a name="l00151"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#aba204e4408dd798bd063f46a8ec35fe5">00151</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#aba204e4408dd798bd063f46a8ec35fe5">m_xStrideBits</a>;
<a name="l00152"></a><a class="code" href="classkl_unmanaged_raster_buffer.html#afac871393d42292fe99f7e2b6f235f73">00152</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_unmanaged_raster_buffer.html#afac871393d42292fe99f7e2b6f235f73">m_yStrideBits</a>;
<a name="l00153"></a>00153 };
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 <span class="comment">//A klRasterBuffer that manages ownership of the buffer. </span>
<a name="l00156"></a><a class="code" href="classkl_packed_heap_raster_buffer.html">00156</a> <span class="keyword">template</span>&lt;<span class="keyword">typename</span> Sample&gt; <span class="keyword">class </span><a class="code" href="classkl_packed_heap_raster_buffer.html">klPackedHeapRasterBuffer</a>
<a name="l00157"></a>00157     : <span class="keyword">public</span> <a class="code" href="classkl_reference_counted_raster_buffer.html">klReferenceCountedRasterBuffer</a> {
<a name="l00158"></a>00158 <span class="keyword">public</span>:
<a name="l00159"></a>00159     <a class="code" href="classkl_packed_heap_raster_buffer.html">klPackedHeapRasterBuffer&lt;Sample&gt;</a>(
<a name="l00160"></a>00160         <span class="keywordtype">size_t</span> width,
<a name="l00161"></a>00161         <span class="keywordtype">size_t</span> height,
<a name="l00162"></a>00162         <span class="keywordtype">size_t</span> bands = 1,
<a name="l00163"></a>00163         <span class="keywordtype">size_t</span> alignment = 32  
<a name="l00164"></a>00164     ) : <a class="code" href="classkl_packed_heap_raster_buffer.html#a03334aec53c79aa4e8ea4bbc6015d7b9">width_</a>(<a class="code" href="classkl_packed_heap_raster_buffer.html#a1c1a57f455690160e825073e3b297c9c">width</a>), <a class="code" href="classkl_packed_heap_raster_buffer.html#a29ee84102970138d9b02b6f3f1a4ef93">height_</a>(<a class="code" href="classkl_packed_heap_raster_buffer.html#a700315115a5375ef88c78b311139d7d9">height</a>),
<a name="l00165"></a>00165         <a class="code" href="classkl_packed_heap_raster_buffer.html#aecbd5223bb6f14f9eff98a2c0559f504">bands_</a>(bands),<a class="code" href="classkl_packed_heap_raster_buffer.html#a34301fe13b91f15d047dd7ebeb32eeca">_ownBuffer</a>(<span class="keyword">true</span>)
<a name="l00166"></a>00166         
<a name="l00167"></a>00167     {
<a name="l00168"></a>00168         <span class="comment">//bbcrevisit - implement with ippMalloc</span>
<a name="l00169"></a>00169         alignment=0;
<a name="l00170"></a>00170         <a class="code" href="classkl_packed_heap_raster_buffer.html#a6f7e4cdc939f2de09e9a6985bac63a9c">lineStride_</a> =  ( <span class="keyword">sizeof</span>(Sample)*  (<a class="code" href="classkl_packed_heap_raster_buffer.html#a03334aec53c79aa4e8ea4bbc6015d7b9">width_</a> * <a class="code" href="classkl_packed_heap_raster_buffer.html#aecbd5223bb6f14f9eff98a2c0559f504">bands_</a> ));
<a name="l00171"></a>00171                       
<a name="l00172"></a>00172         <a class="code" href="classkl_packed_heap_raster_buffer.html#a8b5c3f69b3e5dd2b9663a2cad07825b5">buffer_</a> = <span class="keyword">new</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>[(<a class="code" href="classkl_packed_heap_raster_buffer.html#a29ee84102970138d9b02b6f3f1a4ef93">height_</a> * <a class="code" href="classkl_packed_heap_raster_buffer.html#a6f7e4cdc939f2de09e9a6985bac63a9c">lineStride_</a>) ];
<a name="l00173"></a>00173         <a class="code" href="classkl_packed_heap_raster_buffer.html#a65494cff457a3c32ba19f134892141c5">alignedBuffer_</a> = <a class="code" href="classkl_packed_heap_raster_buffer.html#a8b5c3f69b3e5dd2b9663a2cad07825b5">buffer_</a> ;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175     }
<a name="l00176"></a>00176 
<a name="l00177"></a>00177 <a class="code" href="classkl_packed_heap_raster_buffer.html">klPackedHeapRasterBuffer&lt;Sample&gt;</a>(
<a name="l00178"></a>00178         <span class="keywordtype">size_t</span> width,
<a name="l00179"></a>00179         <span class="keywordtype">size_t</span> height,
<a name="l00180"></a>00180         <span class="keywordtype">size_t</span> bands ,
<a name="l00181"></a>00181         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * buffer,
<a name="l00182"></a>00182         <span class="keywordtype">size_t</span> alignment = 32  
<a name="l00183"></a>00183     ) : <a class="code" href="classkl_packed_heap_raster_buffer.html#a03334aec53c79aa4e8ea4bbc6015d7b9">width_</a>(<a class="code" href="classkl_packed_heap_raster_buffer.html#a1c1a57f455690160e825073e3b297c9c">width</a>), <a class="code" href="classkl_packed_heap_raster_buffer.html#a29ee84102970138d9b02b6f3f1a4ef93">height_</a>(<a class="code" href="classkl_packed_heap_raster_buffer.html#a700315115a5375ef88c78b311139d7d9">height</a>),
<a name="l00184"></a>00184         <a class="code" href="classkl_packed_heap_raster_buffer.html#aecbd5223bb6f14f9eff98a2c0559f504">bands_</a>(bands), <a class="code" href="classkl_packed_heap_raster_buffer.html#a34301fe13b91f15d047dd7ebeb32eeca">_ownBuffer</a>(<span class="keyword">false</span>)
<a name="l00185"></a>00185         
<a name="l00186"></a>00186     {
<a name="l00187"></a>00187         <span class="comment">//bbcrevisit - implement with ippMalloc</span>
<a name="l00188"></a>00188         alignment=0;
<a name="l00189"></a>00189         <a class="code" href="classkl_packed_heap_raster_buffer.html#a6f7e4cdc939f2de09e9a6985bac63a9c">lineStride_</a> =  ( <span class="keyword">sizeof</span>(Sample)*  (<a class="code" href="classkl_packed_heap_raster_buffer.html#a03334aec53c79aa4e8ea4bbc6015d7b9">width_</a> * <a class="code" href="classkl_packed_heap_raster_buffer.html#aecbd5223bb6f14f9eff98a2c0559f504">bands_</a> ));
<a name="l00190"></a>00190                       
<a name="l00191"></a>00191         <a class="code" href="classkl_packed_heap_raster_buffer.html#a8b5c3f69b3e5dd2b9663a2cad07825b5">buffer_</a> = buffer;
<a name="l00192"></a>00192         <a class="code" href="classkl_packed_heap_raster_buffer.html#a65494cff457a3c32ba19f134892141c5">alignedBuffer_</a> = <a class="code" href="classkl_packed_heap_raster_buffer.html#a8b5c3f69b3e5dd2b9663a2cad07825b5">buffer_</a> ;
<a name="l00193"></a>00193 
<a name="l00194"></a>00194     }
<a name="l00195"></a>00195 
<a name="l00196"></a>00196     <span class="keyword">virtual</span> ~<a class="code" href="classkl_packed_heap_raster_buffer.html">klPackedHeapRasterBuffer&lt;Sample&gt;</a>() { <span class="keyword">delete</span>[] <a class="code" href="classkl_packed_heap_raster_buffer.html#a8b5c3f69b3e5dd2b9663a2cad07825b5">buffer_</a>; }
<a name="l00197"></a>00197 
<a name="l00198"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a0b9e8748d6febe81c5803003a38c9b9a">00198</a>     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="classkl_packed_heap_raster_buffer.html#a0b9e8748d6febe81c5803003a38c9b9a">buffer</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a65494cff457a3c32ba19f134892141c5">alignedBuffer_</a>; }
<a name="l00199"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a122a4dca5bcc892c974825787d0d938e">00199</a>     <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="classkl_packed_heap_raster_buffer.html#a122a4dca5bcc892c974825787d0d938e">buffer</a>() { <span class="keywordflow">return</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a65494cff457a3c32ba19f134892141c5">alignedBuffer_</a>; }
<a name="l00200"></a>00200 
<a name="l00201"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a00031c01c4d18d412755687063e8da7b">00201</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a00031c01c4d18d412755687063e8da7b">numBands</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#aecbd5223bb6f14f9eff98a2c0559f504">bands_</a>; }
<a name="l00202"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a1c1a57f455690160e825073e3b297c9c">00202</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a1c1a57f455690160e825073e3b297c9c">width</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a03334aec53c79aa4e8ea4bbc6015d7b9">width_</a>; }
<a name="l00203"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a700315115a5375ef88c78b311139d7d9">00203</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a700315115a5375ef88c78b311139d7d9">height</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a29ee84102970138d9b02b6f3f1a4ef93">height_</a>; }
<a name="l00204"></a>00204 
<a name="l00205"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a32dd0bdeb55c148012e1bb8f04681fa3">00205</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a32dd0bdeb55c148012e1bb8f04681fa3">bandStrideBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#ab081f77e2218d6dc424cee2b02fe53c5">sampleBits</a>(); }
<a name="l00206"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#adb5dff7bb6032a69e2ce152d103a42bc">00206</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#adb5dff7bb6032a69e2ce152d103a42bc">xStrideBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a00031c01c4d18d412755687063e8da7b">numBands</a>() * <a class="code" href="classkl_packed_heap_raster_buffer.html#a32dd0bdeb55c148012e1bb8f04681fa3">bandStrideBits</a>(); }
<a name="l00207"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a893ba95e7bf0f4000bfe1ff2008cc327">00207</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a893ba95e7bf0f4000bfe1ff2008cc327">yStrideBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a6f7e4cdc939f2de09e9a6985bac63a9c">lineStride_</a> * <a class="code" href="classkl_raster_buffer.html#a45bff21b22ff0999b520bd110c0354cc">bitsPerByte</a>(); }
<a name="l00208"></a>00208 
<a name="l00209"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#ab081f77e2218d6dc424cee2b02fe53c5">00209</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#ab081f77e2218d6dc424cee2b02fe53c5">sampleBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_raster_buffer.html#a45bff21b22ff0999b520bd110c0354cc">bitsPerByte</a>() * <span class="keyword">sizeof</span>(Sample); }
<a name="l00210"></a>00210 
<a name="l00211"></a>00211 <span class="keyword">private</span>:
<a name="l00212"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a34301fe13b91f15d047dd7ebeb32eeca">00212</a>     <span class="keywordtype">bool</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a34301fe13b91f15d047dd7ebeb32eeca">_ownBuffer</a>;
<a name="l00213"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a03334aec53c79aa4e8ea4bbc6015d7b9">00213</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a03334aec53c79aa4e8ea4bbc6015d7b9">width_</a>;
<a name="l00214"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a29ee84102970138d9b02b6f3f1a4ef93">00214</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a29ee84102970138d9b02b6f3f1a4ef93">height_</a>;
<a name="l00215"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#aecbd5223bb6f14f9eff98a2c0559f504">00215</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#aecbd5223bb6f14f9eff98a2c0559f504">bands_</a>;
<a name="l00216"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a6f7e4cdc939f2de09e9a6985bac63a9c">00216</a>     <span class="keywordtype">size_t</span> <a class="code" href="classkl_packed_heap_raster_buffer.html#a6f7e4cdc939f2de09e9a6985bac63a9c">lineStride_</a>;
<a name="l00217"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a8b5c3f69b3e5dd2b9663a2cad07825b5">00217</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * <a class="code" href="classkl_packed_heap_raster_buffer.html#a8b5c3f69b3e5dd2b9663a2cad07825b5">buffer_</a>;
<a name="l00218"></a><a class="code" href="classkl_packed_heap_raster_buffer.html#a65494cff457a3c32ba19f134892141c5">00218</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * <a class="code" href="classkl_packed_heap_raster_buffer.html#a65494cff457a3c32ba19f134892141c5">alignedBuffer_</a>;
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 };
<a name="l00221"></a>00221 
<a name="l00222"></a>00222 <span class="comment">//A klRasterBuffer that uses IPP to allocate and free the image buffer.</span>
<a name="l00223"></a><a class="code" href="classkl_i_p_p_raster_buffer.html">00223</a> <span class="keyword">template</span>&lt;<span class="keyword">typename</span> TYPE&gt; <span class="keyword">class </span><a class="code" href="classkl_i_p_p_raster_buffer.html">klIPPRasterBuffer</a>
<a name="l00224"></a>00224     : <span class="keyword">public</span> <a class="code" href="classkl_reference_counted_raster_buffer.html">klReferenceCountedRasterBuffer</a> {
<a name="l00225"></a>00225 <span class="keyword">public</span>:
<a name="l00226"></a>00226     <a class="code" href="classkl_i_p_p_raster_buffer.html">klIPPRasterBuffer&lt;TYPE&gt;</a>(
<a name="l00227"></a>00227         <span class="keywordtype">size_t</span> width,
<a name="l00228"></a>00228         <span class="keywordtype">size_t</span> height,
<a name="l00229"></a>00229         <span class="keywordtype">size_t</span> bands = 1        
<a name="l00230"></a>00230     ) : <a class="code" href="classkl_i_p_p_raster_buffer.html#ac0eef900dfe47bd1770626c90a3c60dd">_width</a>(<a class="code" href="classkl_i_p_p_raster_buffer.html#a4a0b9519d51beef10b9eddb0e59dd99c">width</a>), <a class="code" href="classkl_i_p_p_raster_buffer.html#a336132b1e5a0600ea5efd8fb7c133c8d">_height</a>(<a class="code" href="classkl_i_p_p_raster_buffer.html#ac9c7a98c66753d67bea0e922a2f32ef4">height</a>),
<a name="l00231"></a>00231         <a class="code" href="classkl_i_p_p_raster_buffer.html#ad3d3c61ff379cbe39960b7bb40d2a7a9">_bands</a>(bands)
<a name="l00232"></a>00232         
<a name="l00233"></a>00233     {
<a name="l00234"></a>00234         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)== <span class="keyword">typeid</span>(<span class="keywordtype">float</span>))
<a name="l00235"></a>00235         {
<a name="l00236"></a>00236             <span class="keywordflow">if</span>(<a class="code" href="classkl_i_p_p_raster_buffer.html#ad3d3c61ff379cbe39960b7bb40d2a7a9">_bands</a> ==1)
<a name="l00237"></a>00237             {
<a name="l00238"></a>00238                 <a class="code" href="classkl_i_p_p_raster_buffer.html#a06a9068022ad63f4c2e424a014720466">_buffer</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*) ippiMalloc_32f_C1( <a class="code" href="classkl_i_p_p_raster_buffer.html#ac0eef900dfe47bd1770626c90a3c60dd">_width</a>, <a class="code" href="classkl_i_p_p_raster_buffer.html#ac9c7a98c66753d67bea0e922a2f32ef4">height</a>, &amp;<a class="code" href="classkl_i_p_p_raster_buffer.html#acab5b56aa0fd59c3a54c332c478800c3">_lineStride</a> );
<a name="l00239"></a>00239             }
<a name="l00240"></a>00240             <span class="keywordflow">if</span>(<a class="code" href="classkl_i_p_p_raster_buffer.html#ad3d3c61ff379cbe39960b7bb40d2a7a9">_bands</a>==3)
<a name="l00241"></a>00241             {
<a name="l00242"></a>00242                 <a class="code" href="classkl_i_p_p_raster_buffer.html#a06a9068022ad63f4c2e424a014720466">_buffer</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)  ippiMalloc_32f_C3( <a class="code" href="classkl_i_p_p_raster_buffer.html#ac0eef900dfe47bd1770626c90a3c60dd">_width</a>, <a class="code" href="classkl_i_p_p_raster_buffer.html#ac9c7a98c66753d67bea0e922a2f32ef4">height</a>, &amp;<a class="code" href="classkl_i_p_p_raster_buffer.html#acab5b56aa0fd59c3a54c332c478800c3">_lineStride</a> );
<a name="l00243"></a>00243             }
<a name="l00244"></a>00244         }
<a name="l00245"></a>00245 
<a name="l00246"></a>00246 
<a name="l00247"></a>00247         <span class="keywordflow">if</span>(<span class="keyword">typeid</span>(TYPE)== <span class="keyword">typeid</span>(<span class="keywordtype">unsigned</span> char))
<a name="l00248"></a>00248         {
<a name="l00249"></a>00249             <span class="keywordflow">if</span>(<a class="code" href="classkl_i_p_p_raster_buffer.html#ad3d3c61ff379cbe39960b7bb40d2a7a9">_bands</a> ==1)
<a name="l00250"></a>00250             {
<a name="l00251"></a>00251                 <a class="code" href="classkl_i_p_p_raster_buffer.html#a06a9068022ad63f4c2e424a014720466">_buffer</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)  ippiMalloc_8u_C1( <a class="code" href="classkl_i_p_p_raster_buffer.html#ac0eef900dfe47bd1770626c90a3c60dd">_width</a>, <a class="code" href="classkl_i_p_p_raster_buffer.html#ac9c7a98c66753d67bea0e922a2f32ef4">height</a>, &amp;<a class="code" href="classkl_i_p_p_raster_buffer.html#acab5b56aa0fd59c3a54c332c478800c3">_lineStride</a> );
<a name="l00252"></a>00252             }
<a name="l00253"></a>00253             <span class="keywordflow">if</span>(<a class="code" href="classkl_i_p_p_raster_buffer.html#ad3d3c61ff379cbe39960b7bb40d2a7a9">_bands</a>==3)
<a name="l00254"></a>00254             {
<a name="l00255"></a>00255                 <a class="code" href="classkl_i_p_p_raster_buffer.html#a06a9068022ad63f4c2e424a014720466">_buffer</a> = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>*)  ippiMalloc_8u_C3( <a class="code" href="classkl_i_p_p_raster_buffer.html#ac0eef900dfe47bd1770626c90a3c60dd">_width</a>, <a class="code" href="classkl_i_p_p_raster_buffer.html#ac9c7a98c66753d67bea0e922a2f32ef4">height</a>, &amp;<a class="code" href="classkl_i_p_p_raster_buffer.html#acab5b56aa0fd59c3a54c332c478800c3">_lineStride</a> );
<a name="l00256"></a>00256             }
<a name="l00257"></a>00257         }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259     }
<a name="l00260"></a>00260     <span class="keyword">virtual</span> ~<a class="code" href="classkl_i_p_p_raster_buffer.html">klIPPRasterBuffer&lt;TYPE&gt;</a>() {ippiFree(<a class="code" href="classkl_i_p_p_raster_buffer.html#a06a9068022ad63f4c2e424a014720466">_buffer</a>); }
<a name="l00261"></a>00261 
<a name="l00262"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#a1b4a1619ea91bfea1b9f3e5a9d116eb9">00262</a>     <span class="keyword">virtual</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="classkl_i_p_p_raster_buffer.html#a1b4a1619ea91bfea1b9f3e5a9d116eb9">buffer</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#a06a9068022ad63f4c2e424a014720466">_buffer</a>; }
<a name="l00263"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#a43f552908b8972ad78d278c42ac7e852">00263</a>     <span class="keyword">virtual</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *<a class="code" href="classkl_i_p_p_raster_buffer.html#a43f552908b8972ad78d278c42ac7e852">buffer</a>() { <span class="keywordflow">return</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#a06a9068022ad63f4c2e424a014720466">_buffer</a>; }
<a name="l00264"></a>00264 
<a name="l00265"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#ae4e5ad0fa0b14af713d4b42d9553b6ac">00265</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#ae4e5ad0fa0b14af713d4b42d9553b6ac">numBands</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#ad3d3c61ff379cbe39960b7bb40d2a7a9">_bands</a>; }
<a name="l00266"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#a4a0b9519d51beef10b9eddb0e59dd99c">00266</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#a4a0b9519d51beef10b9eddb0e59dd99c">width</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#ac0eef900dfe47bd1770626c90a3c60dd">_width</a>; }
<a name="l00267"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#ac9c7a98c66753d67bea0e922a2f32ef4">00267</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#ac9c7a98c66753d67bea0e922a2f32ef4">height</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#a336132b1e5a0600ea5efd8fb7c133c8d">_height</a>; }
<a name="l00268"></a>00268 
<a name="l00269"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#a9ceca6bd5a077db4605119b41f7efda5">00269</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#a9ceca6bd5a077db4605119b41f7efda5">bandStrideBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#a17db6e46120fa09bc7ed01223c9fa7d1">sampleBits</a>(); }
<a name="l00270"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#a45c7fb37d76d054467e1b8a8faa796dc">00270</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#a45c7fb37d76d054467e1b8a8faa796dc">xStrideBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#ae4e5ad0fa0b14af713d4b42d9553b6ac">numBands</a>() * <a class="code" href="classkl_i_p_p_raster_buffer.html#a9ceca6bd5a077db4605119b41f7efda5">bandStrideBits</a>(); }
<a name="l00271"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#ab553f1ee6aace07ed4063993e8526615">00271</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#ab553f1ee6aace07ed4063993e8526615">yStrideBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#acab5b56aa0fd59c3a54c332c478800c3">_lineStride</a> * <a class="code" href="classkl_raster_buffer.html#a45bff21b22ff0999b520bd110c0354cc">bitsPerByte</a>(); }
<a name="l00272"></a>00272 
<a name="l00273"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#a17db6e46120fa09bc7ed01223c9fa7d1">00273</a>     <span class="keyword">virtual</span> <span class="keywordtype">size_t</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#a17db6e46120fa09bc7ed01223c9fa7d1">sampleBits</a>()<span class="keyword"> const </span>{ <span class="keywordflow">return</span> <a class="code" href="classkl_raster_buffer.html#a45bff21b22ff0999b520bd110c0354cc">bitsPerByte</a>() * <span class="keyword">sizeof</span>(TYPE); }
<a name="l00274"></a>00274 
<a name="l00275"></a>00275 <span class="keyword">private</span>:
<a name="l00276"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#ac0eef900dfe47bd1770626c90a3c60dd">00276</a>     <span class="keywordtype">int</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#ac0eef900dfe47bd1770626c90a3c60dd">_width</a>;
<a name="l00277"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#a336132b1e5a0600ea5efd8fb7c133c8d">00277</a>     <span class="keywordtype">int</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#a336132b1e5a0600ea5efd8fb7c133c8d">_height</a>;
<a name="l00278"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#ad3d3c61ff379cbe39960b7bb40d2a7a9">00278</a>     <span class="keywordtype">int</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#ad3d3c61ff379cbe39960b7bb40d2a7a9">_bands</a>;
<a name="l00279"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#acab5b56aa0fd59c3a54c332c478800c3">00279</a>     <span class="keywordtype">int</span> <a class="code" href="classkl_i_p_p_raster_buffer.html#acab5b56aa0fd59c3a54c332c478800c3">_lineStride</a>;
<a name="l00280"></a><a class="code" href="classkl_i_p_p_raster_buffer.html#a06a9068022ad63f4c2e424a014720466">00280</a>     <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> * <a class="code" href="classkl_i_p_p_raster_buffer.html#a06a9068022ad63f4c2e424a014720466">_buffer</a>;
<a name="l00281"></a>00281 
<a name="l00282"></a>00282 };
<a name="l00283"></a>00283 
<a name="l00284"></a>00284 
<a name="l00285"></a>00285 <span class="preprocessor">#endif // #define KL_IMAGE_BUFFER_H189</span>
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Mon Apr 21 2014 10:04:35 for klImageCore by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
